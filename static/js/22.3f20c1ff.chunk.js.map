{"version":3,"sources":["helper/index.ts","api/authentication.ts","assets/logo/logoLogin.png","assets/login/login-1.svg","pages/Login/style.module.scss","pages/Login/index.tsx"],"names":["handleErrorMessage","error","message","destroy","getErrorMessage","configs","APP_ENV","console","log","response","data","msg","replaceURLs","replace","url","hyperlink","match","convertImages","htmlText","handleError","err","checkScript","test","imgMaxSize","login","payload","sendPost","signUp","module","exports","Login","history","useHistory","Cookies","get","to","handleSubmit","params","_","pick","SCRIPT_REGEX","username","password","token","refreshToken","set","expires","rememberMe","push","className","styles","loginContainer","wrapperLogin","formContainer","bordered","loginForm","justify","formTitle","src","logo","alt","onFinish","formContainerItem","Item","name","rules","required","whitespace","wrapperCol","span","customInputLogin","placeholder","maxLength","Password","labelCol","block","type","htmlType","btnLogin","forgotPassword","rightDriver","preserveAspectRatio","width","height","viewBox","version","xmlns","xmlnsXlink","stroke","strokeWidth","fillRule","transform","d","fillOpacity","wrapperImage","logoLogin"],"mappings":"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","file":"static/js/22.3f20c1ff.chunk.js","sourcesContent":["import configs from 'config';\r\nimport { message } from 'antd';\r\n\r\nexport const handleErrorMessage = (error: any) => {\r\n  message.destroy();\r\n  message.error(getErrorMessage(error));\r\n  if (configs.APP_ENV !== 'prod') {\r\n    // tslint:disable-next-line: no-console\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const getErrorMessage = (error: any) => {\r\n  return error?.response?.data?.msg || 'Something went wrong!';\r\n};\r\n\r\nexport const replaceURLs = (message: string) => {\r\n  if (!message) return;\r\n\r\n  var urlRegex = /(((https?:\\/\\/)|(www\\.))[^\\s]+)/g;\r\n  return message.replace(urlRegex, function (url) {\r\n    var hyperlink = url;\r\n    if (!hyperlink.match('^https?://')) {\r\n      hyperlink = 'http://' + hyperlink;\r\n    }\r\n    return '<a href=\"' + hyperlink + '\" target=\"_blank\" rel=\"noopener noreferrer\">' + url + '</a>';\r\n  });\r\n};\r\n\r\nexport const convertImages = (htmlText: string) =>\r\n  htmlText.replace(/<div style=\"text-align:none;\"><img/g, '<div style=\"text-align:center;\"><img');\r\n\r\nexport const handleError = (err: string) => {\r\n  message.destroy();\r\n  message.error(err);\r\n};\r\n\r\nexport const checkScript = (htmlText: string) => {\r\n  const SCRIPT_REGEX = /<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi;\r\n  const testScript = SCRIPT_REGEX.test(htmlText);\r\n\r\n  return testScript;\r\n};\r\nexport const imgMaxSize = 5000000;\r\n","import { ILogin, ISignUp } from 'types/userType';\r\nimport { sendPost, sendPut } from './axios';\r\n\r\n// eslint-disable-next-line import/prefer-default-export\r\nexport const login = (payload: ILogin) => sendPost('/login', payload);\r\nexport const signUp = (payload: ISignUp) => sendPost('/register', payload);\r\nexport const changePassWord = (payload: any) =>\r\n  sendPut('https://training-api.test.amela.vn/v1/app/auth/change-password', payload);\r\n","module.exports = __webpack_public_path__ + \"static/media/logoLogin.3a46b958.png\";","module.exports = __webpack_public_path__ + \"static/media/login-1.6e416515.svg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loginContainer\":\"style_loginContainer__37qyu\",\"wrapperLogin\":\"style_wrapperLogin__XUtyx\",\"rightDriver\":\"style_rightDriver__1FbdE\",\"formContainer\":\"style_formContainer__30_ye\",\"loginForm\":\"style_loginForm__2UZxm\",\"forgotPassword\":\"style_forgotPassword__7aHh5\",\"signUp\":\"style_signUp__2JJPr\",\"formTitle\":\"style_formTitle__1W2tN\",\"customInputLogin\":\"style_customInputLogin__2o2dp\",\"btnLogin\":\"style_btnLogin__3taD9\",\"wrapperImage\":\"style_wrapperImage__3qEYC\"};","import { Button, Card, Form, Input, message, Row } from 'antd';\r\nimport { login } from 'api/authentication';\r\nimport logoLogin from 'assets/login/login-1.svg';\r\nimport logo from 'assets/logo/logoLogin.png';\r\nimport { handleErrorMessage } from 'helper';\r\nimport Cookies from 'js-cookie';\r\nimport _ from 'lodash';\r\nimport React from 'react';\r\nimport { NavLink, Redirect, useHistory } from 'react-router-dom';\r\nimport { ILogin } from 'types/userType';\r\nimport styles from './style.module.scss';\r\nexport default function Login() {\r\n  const history = useHistory();\r\n  const isAuthenticated = !!Cookies.get('token');\r\n  if (isAuthenticated) return <Redirect to=\"/\" />;\r\n\r\n  const handleSubmit = async (payload: ILogin) => {\r\n    const params = _.pick(payload, ['username', 'password']);\r\n    const SCRIPT_REGEX = /<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi;\r\n    const testScript = SCRIPT_REGEX.test(params.username) || SCRIPT_REGEX.test(params.password);\r\n    if (testScript) {\r\n      message.destroy();\r\n      message.error('Đăng nhập thất bại');\r\n      return;\r\n    }\r\n    try {\r\n      const data = await login(params);\r\n      const { token, refreshToken } = data;\r\n      Cookies.set('token', token, {\r\n        expires: payload.rememberMe ? 10000 : 10000,\r\n      });\r\n      Cookies.set('refreshToken', refreshToken, {\r\n        expires: payload.rememberMe ? 10000 : 10000,\r\n      });\r\n      history.push('/');\r\n    } catch (error) {\r\n      handleErrorMessage(error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={styles.loginContainer}>\r\n      <div className={styles.wrapperLogin}>\r\n        <div className={styles.formContainer}>\r\n          <Card bordered className={styles.loginForm}>\r\n            <Row justify=\"center\" className={styles.formTitle}>\r\n              <img src={logo} alt=\"\" />\r\n              <h3>we are laugh</h3>\r\n            </Row>\r\n            <Form onFinish={handleSubmit} className={styles.formContainerItem}>\r\n              <Form.Item\r\n                name=\"username\"\r\n                rules={[\r\n                  {\r\n                    required: true,\r\n                    message: 'Username không được để trống',\r\n                    whitespace: true,\r\n                  },\r\n                ]}\r\n                wrapperCol={{ span: 24 }}\r\n              >\r\n                <Input className={styles.customInputLogin} placeholder=\"Tên tài khoản\" maxLength={50} />\r\n              </Form.Item>\r\n              <Form.Item\r\n                name=\"password\"\r\n                rules={[{ required: true, message: 'Password không được để trống' }]}\r\n                wrapperCol={{ span: 24 }}\r\n              >\r\n                <Input.Password className={styles.customInputLogin} placeholder=\"Mật khẩu\" maxLength={50} />\r\n              </Form.Item>\r\n              <Form.Item labelCol={{ span: 24 }}>\r\n                <Button block type=\"primary\" htmlType=\"submit\" className={styles.btnLogin}>\r\n                  {'Đăng nhập'}\r\n                </Button>\r\n              </Form.Item>\r\n              <Form.Item labelCol={{ span: 24 }} className={styles.forgotPassword}>\r\n                <NavLink to=\"/forgot-password\">Quên mật khẩu</NavLink>\r\n              </Form.Item>\r\n            </Form>\r\n          </Card>\r\n\r\n          <Card className={styles.signUp} bordered>\r\n            <Row justify=\"center\" className={styles.formTitle}>\r\n              <h3>\r\n                Nếu chưa có tài khoản vui lòng <NavLink to=\"/sign-up\">đăng ký</NavLink>\r\n              </h3>\r\n            </Row>\r\n          </Card>\r\n        </div>\r\n\r\n        <div className={styles.rightDriver}>\r\n          <svg\r\n            preserveAspectRatio=\"none\"\r\n            width=\"102px\"\r\n            height=\"1080px\"\r\n            viewBox=\"0 0 102 1080\"\r\n            version=\"1.1\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            xmlnsXlink=\"http://www.w3.org/1999/xlink\"\r\n          >\r\n            <g stroke=\"none\" strokeWidth=\"1\" fillRule=\"evenodd\">\r\n              <g fillRule=\"nonzero\">\r\n                <g transform=\"translate(51.000000, 540.000000) rotate(90.000000) translate(-51.000000, -540.000000) translate(-489.000000, 489.000000)\">\r\n                  <g transform=\"translate(540.000000, 51.000000) rotate(180.000000) translate(-540.000000, -51.000000) \">\r\n                    <path\r\n                      d=\"M0,7.9621684 C164.947265,47.9621684 344.947265,54.6288351 540,27.9621684 C735.052736,1.2955018 915.052736,14.6288351 1080,67.9621684 L1080,102 L0,102 L0,7.9621684 Z\"\r\n                      fillOpacity=\"0.457\"\r\n                    ></path>\r\n                    <path\r\n                      d=\"M0,37.9621684 C169.028912,88.578393 349.028912,88.578393 540,37.9621684 C730.97109,-12.6540561 910.97109,-12.6540561 1080,37.9621684 L1080,102 L0,102 L0,37.9621684 Z\"\r\n                      transform=\"translate(540.000000, 51.000000) scale(-1, 1) translate(-540.000000, -51.000000) \"\r\n                    ></path>\r\n                  </g>\r\n                </g>\r\n              </g>\r\n            </g>\r\n          </svg>\r\n        </div>\r\n      </div>\r\n      <div className={styles.wrapperImage}>\r\n        <img src={logoLogin} alt=\"\" />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"sourceRoot":""}